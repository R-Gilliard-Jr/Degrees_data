<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.5 Lesson 5 - Control Flow | R Course Syllabus</title>
  <meta name="description" content="2.5 Lesson 5 - Control Flow | R Course Syllabus" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="2.5 Lesson 5 - Control Flow | R Course Syllabus" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.5 Lesson 5 - Control Flow | R Course Syllabus" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lesson-4---tidy-data-and-dplyr.html"/>
<link rel="next" href="lesson-6---functions.html"/>
<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="contact.html"><a href="contact.html"><i class="fa fa-check"></i><b>1.1</b> Contact</a></li>
<li class="chapter" data-level="1.2" data-path="about-the-instructor.html"><a href="about-the-instructor.html"><i class="fa fa-check"></i><b>1.2</b> About the instructor</a></li>
<li class="chapter" data-level="1.3" data-path="plan-for-the-course.html"><a href="plan-for-the-course.html"><i class="fa fa-check"></i><b>1.3</b> Plan for the course</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="plan-for-the-course.html"><a href="plan-for-the-course.html#learning"><i class="fa fa-check"></i><b>1.3.1</b> Learning</a></li>
<li class="chapter" data-level="1.3.2" data-path="plan-for-the-course.html"><a href="plan-for-the-course.html#project"><i class="fa fa-check"></i><b>1.3.2</b> Project</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>1.4</b> Syllabus</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="unit-1---learn-r.html"><a href="unit-1---learn-r.html"><i class="fa fa-check"></i><b>2</b> Unit 1 - Learn R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lesson-1---an-introduction-to-r-what-why-how.html"><a href="lesson-1---an-introduction-to-r-what-why-how.html"><i class="fa fa-check"></i><b>2.1</b> Lesson 1 - An introduction to R (what, why, how)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="lesson-1---an-introduction-to-r-what-why-how.html"><a href="lesson-1---an-introduction-to-r-what-why-how.html#topics-covered"><i class="fa fa-check"></i><b>2.1.1</b> Topics Covered</a></li>
<li class="chapter" data-level="2.1.2" data-path="lesson-1---an-introduction-to-r-what-why-how.html"><a href="lesson-1---an-introduction-to-r-what-why-how.html#lesson"><i class="fa fa-check"></i><b>2.1.2</b> Lesson</a></li>
<li class="chapter" data-level="2.1.3" data-path="lesson-1---an-introduction-to-r-what-why-how.html"><a href="lesson-1---an-introduction-to-r-what-why-how.html#helpful-links"><i class="fa fa-check"></i><b>2.1.3</b> Helpful Links</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lesson-2---variables-data-types-and-operators.html"><a href="lesson-2---variables-data-types-and-operators.html"><i class="fa fa-check"></i><b>2.2</b> Lesson 2 - Variables, data types, and operators</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="lesson-2---variables-data-types-and-operators.html"><a href="lesson-2---variables-data-types-and-operators.html#topics-covered-1"><i class="fa fa-check"></i><b>2.2.1</b> Topics Covered</a></li>
<li class="chapter" data-level="2.2.2" data-path="lesson-2---variables-data-types-and-operators.html"><a href="lesson-2---variables-data-types-and-operators.html#lesson-1"><i class="fa fa-check"></i><b>2.2.2</b> Lesson</a></li>
<li class="chapter" data-level="2.2.3" data-path="lesson-2---variables-data-types-and-operators.html"><a href="lesson-2---variables-data-types-and-operators.html#helpful-links-1"><i class="fa fa-check"></i><b>2.2.3</b> Helpful Links</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lesson-3---vectors.html"><a href="lesson-3---vectors.html"><i class="fa fa-check"></i><b>2.3</b> Lesson 3 - Vectors</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="lesson-3---vectors.html"><a href="lesson-3---vectors.html#topics-covered-2"><i class="fa fa-check"></i><b>2.3.1</b> Topics Covered</a></li>
<li class="chapter" data-level="2.3.2" data-path="lesson-3---vectors.html"><a href="lesson-3---vectors.html#lesson-2"><i class="fa fa-check"></i><b>2.3.2</b> Lesson</a></li>
<li class="chapter" data-level="2.3.3" data-path="lesson-3---vectors.html"><a href="lesson-3---vectors.html#helpful-links-2"><i class="fa fa-check"></i><b>2.3.3</b> Helpful Links</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="lesson-4---tidy-data-and-dplyr.html"><a href="lesson-4---tidy-data-and-dplyr.html"><i class="fa fa-check"></i><b>2.4</b> Lesson 4 - Tidy data and dplyr</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="lesson-4---tidy-data-and-dplyr.html"><a href="lesson-4---tidy-data-and-dplyr.html#topics-covered-3"><i class="fa fa-check"></i><b>2.4.1</b> Topics Covered</a></li>
<li class="chapter" data-level="2.4.2" data-path="lesson-4---tidy-data-and-dplyr.html"><a href="lesson-4---tidy-data-and-dplyr.html#lesson-3"><i class="fa fa-check"></i><b>2.4.2</b> Lesson</a></li>
<li class="chapter" data-level="2.4.3" data-path="lesson-4---tidy-data-and-dplyr.html"><a href="lesson-4---tidy-data-and-dplyr.html#helpful-links-3"><i class="fa fa-check"></i><b>2.4.3</b> Helpful Links</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="lesson-5---control-flow.html"><a href="lesson-5---control-flow.html"><i class="fa fa-check"></i><b>2.5</b> Lesson 5 - Control Flow</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="lesson-5---control-flow.html"><a href="lesson-5---control-flow.html#topics-covered-4"><i class="fa fa-check"></i><b>2.5.1</b> Topics Covered</a></li>
<li class="chapter" data-level="2.5.2" data-path="lesson-5---control-flow.html"><a href="lesson-5---control-flow.html#lesson-4"><i class="fa fa-check"></i><b>2.5.2</b> Lesson</a></li>
<li class="chapter" data-level="2.5.3" data-path="lesson-5---control-flow.html"><a href="lesson-5---control-flow.html#helpful-links-4"><i class="fa fa-check"></i><b>2.5.3</b> <strong>Helpful Links</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="lesson-6---functions.html"><a href="lesson-6---functions.html"><i class="fa fa-check"></i><b>2.6</b> Lesson 6 - Functions</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="lesson-6---functions.html"><a href="lesson-6---functions.html#topics-covered-5"><i class="fa fa-check"></i><b>2.6.1</b> <strong>Topics Covered</strong></a></li>
<li class="chapter" data-level="2.6.2" data-path="lesson-6---functions.html"><a href="lesson-6---functions.html#lesson-5"><i class="fa fa-check"></i><b>2.6.2</b> <strong>Lesson</strong></a></li>
<li class="chapter" data-level="2.6.3" data-path="lesson-6---functions.html"><a href="lesson-6---functions.html#helpful-links-5"><i class="fa fa-check"></i><b>2.6.3</b> <strong>Helpful Links</strong></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Course Syllabus</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-5---control-flow" class="section level2 tabset tabset-fade tabset-pills hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Lesson 5 - Control Flow<a href="lesson-5---control-flow.html#lesson-5---control-flow" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="topics-covered-4" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Topics Covered<a href="lesson-5---control-flow.html#topics-covered-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>If/then conditionals and their use</li>
<li>While loops</li>
<li>For loops</li>
<li>A brief discussion of map</li>
</ol>
</div>
<div id="lesson-4" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Lesson<a href="lesson-5---control-flow.html#lesson-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="conditionals-and-their-use" class="section level4 hasAnchor" number="2.5.2.1">
<h4><span class="header-section-number">2.5.2.1</span> <strong>Conditionals and their Use</strong><a href="lesson-5---control-flow.html#conditionals-and-their-use" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If it rains, then I will bring an umbrella. If I get a dog or a cat, then I will make trips to the vet. Both of these sentences are conditionals. We operate by taking in information and then making decisions based on that information. Sometimes code needs to operate that way too: the same solution does not always work for different problems. In R, these if/then statements are called conditionals.</p>
<p>Conditionals are useful in a variety of circumstances. A basic example can convert our story about rain into code:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="lesson-5---control-flow.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Weather vector/variable, storing the day&#39;s weather</span></span>
<span id="cb234-2"><a href="lesson-5---control-flow.html#cb234-2" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;rainy&quot;</span>, <span class="st">&quot;sunny&quot;</span>), <span class="dv">1</span>)</span>
<span id="cb234-3"><a href="lesson-5---control-flow.html#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If/then conditional</span></span>
<span id="cb234-4"><a href="lesson-5---control-flow.html#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (weather <span class="sc">==</span> <span class="st">&quot;rainy&quot;</span>) {</span>
<span id="cb234-5"><a href="lesson-5---control-flow.html#cb234-5" aria-hidden="true" tabindex="-1"></a>  umbrella <span class="ot">&lt;-</span> <span class="st">&quot;brought my umbrella&quot;</span></span>
<span id="cb234-6"><a href="lesson-5---control-flow.html#cb234-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb234-7"><a href="lesson-5---control-flow.html#cb234-7" aria-hidden="true" tabindex="-1"></a>  umbrella <span class="ot">&lt;-</span> <span class="st">&quot;did not bring my umbrella&quot;</span></span>
<span id="cb234-8"><a href="lesson-5---control-flow.html#cb234-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb234-9"><a href="lesson-5---control-flow.html#cb234-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the result</span></span>
<span id="cb234-10"><a href="lesson-5---control-flow.html#cb234-10" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The weather is&quot;</span>, weather, <span class="st">&quot;so I&quot;</span>, umbrella)</span></code></pre></div>
<pre><code>## [1] &quot;The weather is sunny so I did not bring my umbrella&quot;</code></pre>
<p>First, we created a variable to hold the weather. The code above just randomly chooses the weather as either rainy or sunny. Then, we created the conditional. <code>if</code> tells R that we want an if conditional. We enclose the condition in parentheses <code>(weather == rainy)</code>. The curly braces <code>{}</code> tell R what to do in the event that it is rainy. Then <code>else {}</code> tells R what to do in the event that the weather is not rainy. The final output changes depending on the weather.
You are not limited to just two options. There is also <code>else if</code>.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="lesson-5---control-flow.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `rm()` function removes an object from an environment</span></span>
<span id="cb236-2"><a href="lesson-5---control-flow.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(umbrella)</span>
<span id="cb236-3"><a href="lesson-5---control-flow.html#cb236-3" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="st">&quot;cloudy&quot;</span></span>
<span id="cb236-4"><a href="lesson-5---control-flow.html#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If/then conditional</span></span>
<span id="cb236-5"><a href="lesson-5---control-flow.html#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (weather <span class="sc">==</span> <span class="st">&quot;rainy&quot;</span>) {</span>
<span id="cb236-6"><a href="lesson-5---control-flow.html#cb236-6" aria-hidden="true" tabindex="-1"></a>  umbrella <span class="ot">&lt;-</span> <span class="st">&quot;brought my umbrella&quot;</span></span>
<span id="cb236-7"><a href="lesson-5---control-flow.html#cb236-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (weather <span class="sc">==</span> <span class="st">&quot;cloudy&quot;</span>) {</span>
<span id="cb236-8"><a href="lesson-5---control-flow.html#cb236-8" aria-hidden="true" tabindex="-1"></a>  umbrella <span class="ot">&lt;-</span> <span class="st">&quot;brought my umbrella&quot;</span></span>
<span id="cb236-9"><a href="lesson-5---control-flow.html#cb236-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb236-10"><a href="lesson-5---control-flow.html#cb236-10" aria-hidden="true" tabindex="-1"></a>  umbrella <span class="ot">&lt;-</span> <span class="st">&quot;did not bring my umbrella&quot;</span></span>
<span id="cb236-11"><a href="lesson-5---control-flow.html#cb236-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb236-12"><a href="lesson-5---control-flow.html#cb236-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the result</span></span>
<span id="cb236-13"><a href="lesson-5---control-flow.html#cb236-13" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The weather is&quot;</span>, weather, <span class="st">&quot;so I&quot;</span>, umbrella)</span></code></pre></div>
<pre><code>## [1] &quot;The weather is cloudy so I brought my umbrella&quot;</code></pre>
<p>You could stack multiple <code>else if</code> statements as your <code>if</code> conditional becomes more and more complex. There is also a vectorized version of if/else <code>ifelse()</code>. Use this function when you’d like to operate on a set of values at the same time. <code>ifelse()</code> is particularly useful when manipulating data.</p>
<p>Here is an example with more applicability to data analysis. Suppose that you are conducting a study where some students are randomly assigned to attend private school. You want to compare the test scores of students assigned to private school and the test scores of students who remained in a public school. When a student is assigned to a private school the treatment variable is set to 1 and when they are not it is set to 0.</p>
<p>First, let’s create some fake data</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="lesson-5---control-flow.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sampling a treatment variable and creating testscores</span></span>
<span id="cb238-2"><a href="lesson-5---control-flow.html#cb238-2" aria-hidden="true" tabindex="-1"></a>study_data <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">treatment =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dv">1000</span>, <span class="at">replace =</span> T), <span class="at">score =</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">100</span>)))</span>
<span id="cb238-3"><a href="lesson-5---control-flow.html#cb238-3" aria-hidden="true" tabindex="-1"></a>study_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(study_data)</span>
<span id="cb238-4"><a href="lesson-5---control-flow.html#cb238-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-5"><a href="lesson-5---control-flow.html#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="co"># table showing the distribution of treated and untreated cases</span></span>
<span id="cb238-6"><a href="lesson-5---control-flow.html#cb238-6" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(study_data<span class="sc">$</span>treatment)</span></code></pre></div>
<pre><code>## 
##   0   1 
## 471 529</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="lesson-5---control-flow.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of student schore</span></span>
<span id="cb240-2"><a href="lesson-5---control-flow.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(study_data<span class="sc">$</span>score)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    0.00   24.00   47.00   48.71   74.00  100.00</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="lesson-5---control-flow.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph of scores</span></span>
<span id="cb242-2"><a href="lesson-5---control-flow.html#cb242-2" aria-hidden="true" tabindex="-1"></a>study_data <span class="sc">%&gt;%</span></span>
<span id="cb242-3"><a href="lesson-5---control-flow.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">treatment =</span> <span class="fu">factor</span>(treatment, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb242-4"><a href="lesson-5---control-flow.html#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treatment) <span class="sc">%&gt;%</span></span>
<span id="cb242-5"><a href="lesson-5---control-flow.html#cb242-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> score, <span class="at">fill =</span> treatment)) <span class="sc">+</span></span>
<span id="cb242-6"><a href="lesson-5---control-flow.html#cb242-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb242-7"><a href="lesson-5---control-flow.html#cb242-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> treatment)</span></code></pre></div>
<p><img src="Bookdown-Syllabus_files/figure-html/l5_1_2-1.png" width="672" /></p>
<p>Suppose that there was another piece of your study. All students who did not receive the treatment were instead provided with free metro cards. Some of the private school students got free metro cards, but they got them through other sources. We can represent this in the data using <code>ifelse()</code> and <code>mutate()</code>.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="lesson-5---control-flow.html#cb243-1" aria-hidden="true" tabindex="-1"></a>private_students <span class="ot">&lt;-</span> <span class="fu">nrow</span>(study_data[study_data<span class="sc">$</span>treatment <span class="sc">==</span> <span class="dv">1</span>,])</span>
<span id="cb243-2"><a href="lesson-5---control-flow.html#cb243-2" aria-hidden="true" tabindex="-1"></a>study_data <span class="ot">&lt;-</span></span>
<span id="cb243-3"><a href="lesson-5---control-flow.html#cb243-3" aria-hidden="true" tabindex="-1"></a>  study_data <span class="sc">%&gt;%</span></span>
<span id="cb243-4"><a href="lesson-5---control-flow.html#cb243-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># In English: If a student was not treated then they received a metro card, otherwise they may have had a metro card and generate those values randomly</span></span>
<span id="cb243-5"><a href="lesson-5---control-flow.html#cb243-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">metro_card =</span> <span class="fu">ifelse</span>(treatment <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), private_students, <span class="at">replace =</span>T)))</span>
<span id="cb243-6"><a href="lesson-5---control-flow.html#cb243-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-7"><a href="lesson-5---control-flow.html#cb243-7" aria-hidden="true" tabindex="-1"></a>study_data <span class="sc">%&gt;%</span></span>
<span id="cb243-8"><a href="lesson-5---control-flow.html#cb243-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treatment) <span class="sc">%&gt;%</span></span>
<span id="cb243-9"><a href="lesson-5---control-flow.html#cb243-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(metro_card),</span>
<span id="cb243-10"><a href="lesson-5---control-flow.html#cb243-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">n</span>(),</span>
<span id="cb243-11"><a href="lesson-5---control-flow.html#cb243-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mean</span>(metro_card))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   treatment `sum(metro_card)` `n()` `mean(metro_card)`
##       &lt;dbl&gt;             &lt;dbl&gt; &lt;int&gt;              &lt;dbl&gt;
## 1         0               471   471              1    
## 2         1               251   529              0.474</code></pre>
<p>Everyone without the treatment received a metro card and about half of the private school students received a free metro card through some other means.</p>
</div>
<div id="while-loops" class="section level4 hasAnchor" number="2.5.2.2">
<h4><span class="header-section-number">2.5.2.2</span> <strong>While loops</strong><a href="lesson-5---control-flow.html#while-loops" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes it is useful to do something until a certain condition is met. <code>while</code> loops can be used for this purpose. Suppose, for example, you wanted to sum all of the numbers from 0 to 100:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="lesson-5---control-flow.html#cb245-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb245-2"><a href="lesson-5---control-flow.html#cb245-2" aria-hidden="true" tabindex="-1"></a>total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb245-3"><a href="lesson-5---control-flow.html#cb245-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="dv">100</span>) {</span>
<span id="cb245-4"><a href="lesson-5---control-flow.html#cb245-4" aria-hidden="true" tabindex="-1"></a>  total <span class="ot">&lt;-</span> total <span class="sc">+</span> i</span>
<span id="cb245-5"><a href="lesson-5---control-flow.html#cb245-5" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb245-6"><a href="lesson-5---control-flow.html#cb245-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb245-7"><a href="lesson-5---control-flow.html#cb245-7" aria-hidden="true" tabindex="-1"></a>total</span></code></pre></div>
<pre><code>## [1] 5050</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="lesson-5---control-flow.html#cb247-1" aria-hidden="true" tabindex="-1"></a>i</span></code></pre></div>
<pre><code>## [1] 101</code></pre>
<p>Outside of the loop we defined the variables to i and total to track the iteration of the loop that we are on and the total respectively. The while loop is made up of the statement <code>while</code>, the condition wrapped in parentheses, and the curly braces <code>{}</code> which enclose the code to be executed while the condition is TRUE. As soon as the condition becomes false–that is, i &gt; 100, then the while loop stops executing.</p>
<p>When working with <code>while</code> loops, be careful not to create an infinite loop. If you create a condition which is always true then your code will run forever and you will have to manually break the program.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="lesson-5---control-flow.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; i &lt;- 1</span></span>
<span id="cb249-2"><a href="lesson-5---control-flow.html#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; while (i &gt; 0) {</span></span>
<span id="cb249-3"><a href="lesson-5---control-flow.html#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;  i &lt;- i + 1</span></span>
<span id="cb249-4"><a href="lesson-5---control-flow.html#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; }</span></span>
<span id="cb249-5"><a href="lesson-5---control-flow.html#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; The code above will run forever because i will always be greater than 0</span></span></code></pre></div>
</div>
<div id="for-loops" class="section level4 hasAnchor" number="2.5.2.3">
<h4><span class="header-section-number">2.5.2.3</span> <strong>For loops</strong><a href="lesson-5---control-flow.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It is often the case that you will want to repeat the same code when performing data analysis. One way to do this is with the for loop.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="lesson-5---control-flow.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) {</span>
<span id="cb250-2"><a href="lesson-5---control-flow.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb250-3"><a href="lesson-5---control-flow.html#cb250-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 0
## [1] 1</code></pre>
<p>We begin with the <code>for</code> statement, then in parentheses we set the range or values that we want <code>for</code> to operate over, and then in the curly braces <code>{}</code> we place the code that we would like repeated. People often create for loops using the <code>seq()</code> function:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="lesson-5---control-flow.html#cb252-1" aria-hidden="true" tabindex="-1"></a>sum <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb252-2"><a href="lesson-5---control-flow.html#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)) {</span>
<span id="cb252-3"><a href="lesson-5---control-flow.html#cb252-3" aria-hidden="true" tabindex="-1"></a>  sum <span class="ot">&lt;-</span> sum <span class="sc">+</span> i</span>
<span id="cb252-4"><a href="lesson-5---control-flow.html#cb252-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb252-5"><a href="lesson-5---control-flow.html#cb252-5" aria-hidden="true" tabindex="-1"></a>sum</span></code></pre></div>
<pre><code>## [1] 30</code></pre>
<p>But you can loop over any vector.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="lesson-5---control-flow.html#cb254-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Reggie&quot;</span>, <span class="st">&quot;Gilliard&quot;</span>, <span class="st">&quot;Jr.&quot;</span>)</span>
<span id="cb254-2"><a href="lesson-5---control-flow.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> names) {</span>
<span id="cb254-3"><a href="lesson-5---control-flow.html#cb254-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb254-4"><a href="lesson-5---control-flow.html#cb254-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Reggie&quot;
## [1] &quot;Gilliard&quot;
## [1] &quot;Jr.&quot;</code></pre>
</div>
<div id="map" class="section level4 hasAnchor" number="2.5.2.4">
<h4><span class="header-section-number">2.5.2.4</span> <strong>map</strong><a href="lesson-5---control-flow.html#map" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Surprisingly, <code>for</code> loops are not that common in R. Most often, people use a family functions called the apply functions. These functions loop over lists, vectors, matrices, and data frames and return objects of the same type. But purrr, a package in the tidyverse suite, has its own versions of these functions. I’ll only introduce you to one here, <code>map</code>.</p>
<p>With the <code>map</code> function you provide a vector of values that you would like to loop over, and then a function to apply to those values. You can provide the function to map in 3 different ways.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="lesson-5---control-flow.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining a function that will multiply a value by 10</span></span>
<span id="cb256-2"><a href="lesson-5---control-flow.html#cb256-2" aria-hidden="true" tabindex="-1"></a>mult10 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb256-3"><a href="lesson-5---control-flow.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">*</span><span class="dv">10</span>)</span>
<span id="cb256-4"><a href="lesson-5---control-flow.html#cb256-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb256-5"><a href="lesson-5---control-flow.html#cb256-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-6"><a href="lesson-5---control-flow.html#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the tilde to create an anonymous funciton</span></span>
<span id="cb256-7"><a href="lesson-5---control-flow.html#cb256-7" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span> .x <span class="sc">*</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 10
## 
## [[2]]
## [1] 20
## 
## [[3]]
## [1] 30
## 
## [[4]]
## [1] 40
## 
## [[5]]
## [1] 50
## 
## [[6]]
## [1] 60
## 
## [[7]]
## [1] 70
## 
## [[8]]
## [1] 80
## 
## [[9]]
## [1] 90
## 
## [[10]]
## [1] 100</code></pre>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="lesson-5---control-flow.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining an anonymous function inline</span></span>
<span id="cb258-2"><a href="lesson-5---control-flow.html#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="cf">function</span>(x) x<span class="sc">*</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 10
## 
## [[2]]
## [1] 20
## 
## [[3]]
## [1] 30
## 
## [[4]]
## [1] 40
## 
## [[5]]
## [1] 50
## 
## [[6]]
## [1] 60
## 
## [[7]]
## [1] 70
## 
## [[8]]
## [1] 80
## 
## [[9]]
## [1] 90
## 
## [[10]]
## [1] 100</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="lesson-5---control-flow.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using an extant function</span></span>
<span id="cb260-2"><a href="lesson-5---control-flow.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, mult10)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 10
## 
## [[2]]
## [1] 20
## 
## [[3]]
## [1] 30
## 
## [[4]]
## [1] 40
## 
## [[5]]
## [1] 50
## 
## [[6]]
## [1] 60
## 
## [[7]]
## [1] 70
## 
## [[8]]
## [1] 80
## 
## [[9]]
## [1] 90
## 
## [[10]]
## [1] 100</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="lesson-5---control-flow.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Each of these is equivalent to running</span></span>
<span id="cb262-2"><a href="lesson-5---control-flow.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="dv">1</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">2</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">3</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">4</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">5</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">6</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">7</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">8</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">9</span> <span class="sc">*</span> <span class="dv">10</span>, <span class="dv">10</span> <span class="sc">*</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 10
## 
## [[2]]
## [1] 20
## 
## [[3]]
## [1] 30
## 
## [[4]]
## [1] 40
## 
## [[5]]
## [1] 50
## 
## [[6]]
## [1] 60
## 
## [[7]]
## [1] 70
## 
## [[8]]
## [1] 80
## 
## [[9]]
## [1] 90
## 
## [[10]]
## [1] 100</code></pre>
<p>Even in these examples it is clear that functions like <code>map()</code> (formally called functionals) make repeating tasks much more efficient. You are much more likely to see functions like map, or lapply when working with code in R, so as you continue your coding journey it is worthwhile to investigate them more deeply.</p>
</div>
</div>
<div id="helpful-links-4" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> <strong>Helpful Links</strong><a href="lesson-5---control-flow.html#helpful-links-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://www.codecademy.com/courses/learn-r/lessons/intro-visualization-ggplot2-r/exercises/review">Codecademy Lesson</a></li>
<li><a href="https://www.w3schools.com/r/r_if_else.asp">W3 Schools</a></li>
<li><a href="https://adv-r.hadley.nz/functionals.html#map">Functionals</a></li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-4---tidy-data-and-dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-6---functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
